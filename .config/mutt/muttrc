## ${XDG_CONFIG_DIR}/mutt/muttrc
## milomouse <vincent[at]fea.st>

# - intrinsic locations:
set folder           = ~/mail
set mbox_type        = Maildir
set spoolfile        = "+FastMail/INBOX"
set header_cache     = ${XDG_CONFIG_DIR}/mutt/cache/headers
set message_cachedir = ${XDG_CONFIG_DIR}/mutt/cache/bodies
set mailcap_path     = ${XDG_CONFIG_DIR}/mutt/mailcap
set signature        = ${XDG_CONFIG_DIR}/mutt/sig
set tmpdir           = ${XDG_CONFIG_DIR}/mutt/temp

# - source gpg, colors and accounts:
source /etc/Muttrc.gpg.dist
source ${XDG_CONFIG_DIR}/mutt/colors.muttrc
source ${XDG_CONFIG_DIR}/mutt/fastmail.muttrc
folder-hook FastMail/* source ${XDG_CONFIG_DIR}/mutt/fastmail.muttrc

# - watch-folders and subscriptions:
mailboxes +FastMail/INBOX +FastMail/Forums +FastMail/Filesystems +FastMail/Arch-Dev +FastMail/Uzbl-Dev +FastMail/Storage +FastMail/Junk\ Mail +FastMail/Sent\ Items +FastMail/Drafts +FastMail/Trash
subscribe arch-announce arch-dev-public arch-general

# - external handlers:
set editor           = "vim +/^$"
set ispell           = "hunspell"

# - core settings:
unset confirmappend
set delete
set mail_check = 0
unset markers
unset mark_old
set menu_scroll
set pager_index_lines = 10
set pager_context     = 5
set pager_stop
set pipe_decode
set reverse_alias
set sort = threads
set sort_aux = reverse-last-date-received
unset sort_re
set thorough_search
set tilde
set timeout = 3

# - order of preferred viewing formats:
# auto_view text/html
alternative_order text/plain text/enriched text/html

# - header information:
ignore *
unignore from: to: cc: date: subject:
hdr_order from: to: cc: date: subject:

# - composing mail:
set askcc
set attribution    = "On %d, %n wrote:"
set edit_headers
set fast_reply
set forward_format = "Fwd: %s"
set forward_quote
set include
set realname       = "Vincent"
set reply_to
set reverse_name

# - un-bind some keys:
bind index,pager \# noop
bind index,pager \& noop
bind index,pager i  noop
bind index,pager q  noop

# - key-bindings:
bind pager /        search
bind pager k        previous-line
bind pager j        next-line
bind pager gg       top
bind pager G        bottom
bind pager K        previous-undeleted
bind pager J        next-undeleted
bind pager l        view-attachments
bind pager,index R  group-reply
bind pager,index c  mail
bind index K        previous-unread
bind index J        next-unread
bind index l        display-message
bind browser l      select-entry
bind attach  l      view-attach
bind attach,browser,index,pager z exit
bind index,browser gg first-entry
bind index,browser G  last-entry

# - macros:
macro index gh  "<change-folder>!<enter>" "go to Inbox"
macro index h   "c?" "view folders"
macro index \Cr "<tag-pattern>all<enter><tag-prefix><clear-flag>N<untag-pattern>all<enter>" "mark all as read"
macro index B   "<limit>/home/milob " "search message bodies"
macro index P   "<pipe-message>cat > ~/" "save message as"
macro index I   "<shell-escape>/usr/bin/offlineimap -c ${XDG_CONFIG_DIR}/offlineimap/offlineimaprc -u Curses.Blinkenlights -q -o<enter>" "sync IMAP"
macro index,pager \Cb ":set pipe_decode\n|urlview\n:unset pipe_decode\n"\
		  "extract URLs out of a message"

# - appearance / formatting:
set folder_format = "%3C. %-5.5u %-5.5g %2l %s %N %-52.52f %> %t %F"
set status_format = "───+ %f %m%?n? [+%n]?%?d? [-%d]?%?t? [*%t]? +%?p?───+ %p waiting to send +?─%>─[%P]──"
set alias_format  = "%4n %t %-20a %r"
set date_format   = "%Y-%m-%d %T"
set index_format  = "%3C. %-4c » %-19.19F  %-52.52s %> %Z %d"
set quote_regexp  = "^( {0,4}[>|:#%]| {0,4}[a-z0-9]+[>|]+)+"
set reply_regexp  = "^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"
